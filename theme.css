/*
================================================================================
|                                                                              |
|              JELLYFIN CUSTOM THEME — "Midnight Ember"                        |
|              Based on Jellyfish by n00bcodr                                  |
|              Modified: Vibrant palette, poster fix, logo removed             |
|                                                                              |
================================================================================
|                                                                              |
|  HOW TO USE:                                                                 |
|  Option A: Paste entire file into Jellyfin → Dashboard → General → Custom   |
|  Option B: Host on GitHub and use @import url(...)                           |
|                                                                              |
|  Changes from base Jellyfish:                                                |
|  1. "Midnight Ember" warm amber/gold palette — vibrant, eye-catching         |
|  2. Poster alignment fix on detail pages                                     |
|  3. Jellyfish logo removed (clean header)                                    |
|  4. Sidebar/left menu fix on detail pages                                    |
|  5. Dark glass header with proper text colors                                |
|  6. Various UI refinements                                                   |
|                                                                              |
================================================================================
*/

/* ~~~~~~~~~~~~~~~~~~~~ BASE THEME IMPORT ~~~~~~~~~~~~~~~~~~~~ */
@import url('https://cdn.jsdelivr.net/gh/n00bcodr/jellyfish@main/theme.css');


/* ===================================================================
   1. COLOR PALETTE — "Midnight Ember"
   
   Warm amber/gold on deep dark backgrounds — high contrast,
   premium feel, extremely visible accents that "pop" without
   causing eye strain. Warm tones are more comfortable than 
   cool blues for extended viewing sessions.
   =================================================================== */

:root {
    /* --- Accent Color (Warm Amber/Gold) --- */
    --primary-r: 232;
    --primary-g: 168;
    --primary-b: 75;
    /* Result: #E8A84B — warm gold, rich and vibrant */
    --primary-accent-color: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 1.0);
    --secondary-accent-color: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.5);

    /* --- Background Colors (Deep Dark — NOT pure black) --- */
    --primary-background-color: #0c0f14;       /* Main background: very deep blue-black */
    --secondary-background-color: #13171f;     /* Drawer, cards, dialogs */
    --tertiary-background-color: #1a1f2a;      /* Popovers, elevated surfaces */

    /* --- Transparent Backgrounds --- */
    --primary-background-transparent: rgba(12, 15, 20, 0.65);
    --secondary-background-transparent: rgba(19, 23, 31, 0.72);

    /* --- Surface & Input Colors --- */
    --alt-accent-color: #171c26;               /* Card/input backgrounds */

    /* --- Text Colors --- */
    --text-color: #f0ece5;                     /* Text ON accent backgrounds (buttons, badges) */
    --header-text-color: #d1cdc6;              /* Header navigation text */

    /* --- Header (Dark frosted glass) --- */
    --header-background-color: rgba(12, 15, 20, 0.82);

    /* --- Remove Jellyfish Logo --- */
    --logo: none;

    /* --- No background image --- */
    --background-image: none;

    /* --- Alternate Accents (for active device cards) --- */
    --primary-alt1: rgba(calc(var(--primary-r) - 20), calc(var(--primary-g) - 20), calc(var(--primary-b) - 20), 1);
    --primary-alt2: rgba(calc(var(--primary-r) - 20), calc(var(--primary-g) - 20), calc(var(--primary-b) - 20), 0.82);
    --primary-alt3: rgba(calc(var(--primary-r) - 20), calc(var(--primary-g) - 20), calc(var(--primary-b) - 20), 0.65);
    --primary-alt4: rgba(calc(var(--primary-r) - 20), calc(var(--primary-g) - 20), calc(var(--primary-b) - 20), 0.50);
    --primary-alt5: rgba(calc(var(--primary-r) - 20), calc(var(--primary-g) - 20), calc(var(--primary-b) - 20), 0.35);
}


/* ===================================================================
   2. REMOVE JELLYFISH LOGO FROM HEADER
   =================================================================== */

/* Hide the Jellyfish logo entirely */
.pageTitleWithDefaultLogo {
    background-image: none !important;
    display: none !important;
}

/* Also hide any logo image element */
.pageTitleWithLogo {
    background-image: none !important;
    width: 0 !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
}

/* Clean up admin drawer logo */
.adminDrawerLogo img,
.imgLogoIcon {
    display: none !important;
}


/* ===================================================================
   3. SIDEBAR / LEFT MENU FIX
   
   Problem: Sidebar doesn't work when viewing movie/show detail pages.
   Root cause: Detail page backdrop creates a stacking context that
   captures pointer events above the sidebar's z-index.
   
   Fix: ONLY boost sidebar/header z-index. Do NOT touch any detail
   page containers (detailPageWrapperContainer, detailImageContainer,
   etc.) — that breaks poster positioning.
   =================================================================== */

/* Ensure sidebar is ALWAYS above all page content */
.mainDrawer {
    z-index: 1200 !important;
    pointer-events: auto !important;
}

/* Sidebar overlay/mask must sit just below the drawer */
.mainDrawer-mask,
.mainDrawer-backdrop {
    z-index: 1199 !important;
    pointer-events: auto !important;
}

/* Only unset z-index on the backdrop image layer — nothing else */
.itemBackdrop {
    z-index: unset !important;
}

/* Ensure the scrollable content area in the sidebar receives clicks */
.mainDrawer-scrollContainer {
    pointer-events: auto !important;
}

/* Keep header and hamburger button above backdrops */
.skinHeader {
    z-index: 1100 !important;
}

.mainDrawerButton {
    z-index: 1101 !important;
    pointer-events: auto !important;
}


/* ===================================================================
   5. HEADER TEXT COLOR FIX
   
   Dark glass header needs light text/icons instead of dark.
   =================================================================== */

/* Fix header tab and right-section text for dark header background */
.headerTabs,
.headerRight {
    color: var(--header-text-color) !important;
}

/* Fix header button/tab text */
.homeLibraryText,
.emby-button-foreground {
    color: var(--header-text-color) !important;
}

/* Active tab — bright warm white for clarity */
.emby-tab-button-active > .emby-button-foreground {
    color: var(--text-color) !important;
}

/* Header right section icons — light for dark header */
.headerRight .paper-icon-button-light {
    color: var(--header-text-color) !important;
}

/* Mobile header adjustments */
.layout-mobile .headroom--top .headerRight {
    background: var(--header-background-color) !important;
    color: var(--header-text-color) !important;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.5);
}

/* Header icons on hover — amber accent */
.headerRight .paper-icon-button-light:hover,
.headerRight .paper-icon-button-light:hover:not(:disabled),
.headerRight .paper-icon-button-light:focus,
.headerRight .paper-icon-button-light:focus:not(:disabled) {
    color: var(--primary-accent-color) !important;
}

/* Tab hover text should be warm white (on accent bg) */
.raised:hover .homeLibraryText,
.emby-tab-button:hover .emby-button-foreground {
    color: var(--text-color) !important;
}

/* Header shadow — subtle warm glow */
.headerTabs,
.headerRight {
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.45) !important;
}

/* Mobile header text shadow */
.layout-mobile .emby-button-foreground {
    text-shadow: 0 1px 8px rgba(0, 0, 0, 0.7) !important;
}


/* ===================================================================
   6. TEXT READABILITY — WARM NEUTRALS
   =================================================================== */

/* Body text — warm off-white, comfortable for long sessions */
body,
.layout-desktop,
.layout-mobile,
.layout-tv {
    color: #d1cdc6 !important;
}

/* Section titles — warm amber accent */
.sectionTitle,
.headerUsername {
    color: var(--primary-accent-color) !important;
    text-shadow: 0 1px 12px rgba(232, 168, 75, 0.2) !important;
}

/* Card text — warm gray, readable */
.cardText {
    color: #c4bfb6 !important;
}

/* Secondary/muted text — softer warm gray */
.cardText-secondary,
.secondaryText {
    color: #8a857c !important;
}

/* Selected MUI items — white text on accent */
.MuiListItemButton-root.Mui-selected .MuiListItemIcon-root,
.MuiListItemButton-root.Mui-selected {
    color: #ffffff !important;
}


/* ===================================================================
   7. SIDEBAR STYLING — WARM TONES
   =================================================================== */

/* Sidebar background — deep dark, glass effect */
.layout-desktop .mainDrawer:not(.dashboardDocument),
.layout-mobile .mainDrawer {
    background: rgba(10, 12, 18, 0.94) !important;
    backdrop-filter: blur(40px) saturate(1.2) !important;
    border-right: 1px solid rgba(232, 168, 75, 0.06) !important;
}

/* Sidebar nav items */
.navMenuOption {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5) !important;
}

/* Selected sidebar item — amber highlight */
.navMenuOption-selected {
    background: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.15) !important;
    color: var(--primary-accent-color) !important;
    border-left: 3px solid var(--primary-accent-color) !important;
}

/* Hover on non-selected sidebar items */
.navMenuOption:hover:not(.navMenuOption-selected) {
    background: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.08) !important;
    color: var(--primary-accent-color) !important;
    transform: translateX(4px) !important;
    border-left: 3px solid transparent !important;
}

/* MUI sidebar hover */
.MuiList-subheader .MuiListItemButton-root.MuiListItemButton-gutters:hover:not(.Mui-selected) {
    background: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.07) !important;
    translate: 0 -2px !important;
}

/* MUI sidebar default text — warm gray */
.MuiList-subheader .MuiListItemButton-root.MuiListItemButton-gutters:not(.Mui-selected) .MuiListItemIcon-root,
.MuiList-subheader .MuiListItemButton-root.MuiListItemButton-gutters:not(.Mui-selected) {
    color: #928d85 !important;
}


/* ===================================================================
   8. CARD & LIST ITEM STYLING — WARM ACCENTS
   =================================================================== */

/* Card hover — warm amber glow */
div.card-withuserdata.card-hoverable.card:hover > .cardBox-bottompadded.cardBox > .cardScalable,
div.groupedCard.card-hoverable.overflowSquareCard.card:hover > .cardBox-bottompadded.cardBox > .cardScalable,
div.card-hoverable.squareCard.card:hover > .cardBox-bottompadded.cardBox > .cardScalable {
    border: 2px solid rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.5) !important;
    box-shadow: 0 4px 24px rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.15) !important;
}

/* List item hover — warm subtle lift */
.listItem:hover {
    background: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.05) !important;
    translate: 0 -2px !important;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25) !important;
}

/* Watched indicator — keep green */
.playedIndicator {
    background: #3da83d !important;
    color: white !important;
}

/* Card overlay on hover */
.card-hoverable:hover .cardOverlayContainer {
    background: rgba(12, 15, 20, 0.55) !important;
}


/* ===================================================================
   9. DETAIL PAGE IMPROVEMENTS
   =================================================================== */

/* Detail section content — subtle warm tint */
.detailSectionContent {
    background: rgba(19, 23, 31, 0.65) !important;
    backdrop-filter: blur(var(--blur)) !important;
}

/* Track selections */
.trackSelections {
    background: rgba(19, 23, 31, 0.65) !important;
    backdrop-filter: blur(var(--blur)) !important;
}

/* Details group */
.itemDetailsGroup:has(.detailsGroupItem:not(.hide)) {
    background: rgba(19, 23, 31, 0.55) !important;
    backdrop-filter: blur(var(--blur)) !important;
}

/* Play button — warm amber glow on hover */
.mainDetailButtons .btnPlay:hover {
    filter: brightness(115%) !important;
    box-shadow: 0 0 24px rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.45) !important;
}

/* Tagline border — amber accent */
h3.tagline {
    border-left-color: var(--primary-accent-color) !important;
    color: #a39e95 !important;
}


/* ===================================================================
   10. FORM ELEMENTS & INPUTS
   =================================================================== */

/* Input fields — warm subtle borders */
.emby-input,
.emby-textarea,
.emby-select-withcolor {
    border: 1px solid rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.12) !important;
    background: #151a24 !important;
    color: #d1cdc6 !important;
}

/* Input focus state — amber glow */
.emby-input:focus,
.emby-textarea:focus,
.emby-select-withcolor:focus {
    border-color: var(--primary-accent-color) !important;
    box-shadow: 0 0 0 2px rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.12) !important;
}

/* Paper lists */
.paperList {
    background: #151a24 !important;
}

/* Raised buttons — warm shadow */
.fab,
.raised {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
}

.fab:hover,
.raised:hover {
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 16px rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.18) !important;
}

/* Select dropdowns */
.emby-select option {
    background-color: #1a1f2a !important;
    color: #d1cdc6 !important;
}


/* ===================================================================
   11. PLAYER OSD
   =================================================================== */

/* Skip button — amber glow on hover */
.skip-button:hover,
#skipIntro .btnSkipIntro:hover {
    box-shadow: 0 0 24px rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.5) !important;
}

/* Progress bar track */
.mdl-slider-background-flex {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Up Next dialog */
.upNextContainer:not(#skipIntro) {
    background-color: rgba(12, 15, 20, 0.8) !important;
    border: 1px solid rgba(232, 168, 75, 0.08) !important;
}

/* Toast notifications */
.toastVisible {
    background-color: rgba(12, 15, 20, 0.9) !important;
    backdrop-filter: blur(25px) !important;
    border: 1px solid rgba(232, 168, 75, 0.1) !important;
    color: #d1cdc6 !important;
}


/* ===================================================================
   12. DIALOG & POPUP STYLING
   =================================================================== */

/* Dialogs */
.dialog {
    background-color: #13171f !important;
    border: 1px solid rgba(232, 168, 75, 0.08) !important;
}

/* Dialog header/footer — amber tint */
.formDialogHeader,
.formDialogFooter {
    background: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.12) !important;
}

/* Dialog content */
.formDialogContent {
    background: rgba(19, 23, 31, 0.92) !important;
}

/* Action sheet items hover */
.actionSheetMenuItem.emby-button:hover {
    background-color: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.1) !important;
}

/* MUI Popover/Menu */
.MuiMenu-paper,
.MuiPaper-root.MuiPopover-paper {
    background: rgba(19, 23, 31, 0.95) !important;
    backdrop-filter: blur(20px) !important;
    border: 1px solid rgba(232, 168, 75, 0.06) !important;
}


/* ===================================================================
   13. DASHBOARD IMPROVEMENTS
   =================================================================== */

/* Dashboard update banner — warm accent */
.dashboardActionsContainer::before {
    background-color: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.1) !important;
    color: #b5b0a8 !important;
    border: 1px solid rgba(232, 168, 75, 0.08) !important;
}

/* Dashboard section headings — amber */
.dashboardSection h3 {
    color: var(--primary-accent-color) !important;
}

/* Fieldsets in dashboard */
fieldset.verticalSection-extrabottompadding {
    border-color: rgba(232, 168, 75, 0.08) !important;
}

/* Task progress bar */
.taskProgressInner {
    background: var(--primary-accent-color) !important;
}

/* Alert messages */
.MuiAlert-message {
    color: #ddd8d0 !important;
}

/* Info banners */
.infoBanner {
    background: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.08) !important;
    border: 1px solid rgba(232, 168, 75, 0.12) !important;
    color: #b5b0a8 !important;
}


/* ===================================================================
   14. SCROLLBAR STYLING
   =================================================================== */

/* Subtle amber scrollbars on hover */
*:hover {
    scrollbar-color: rgba(232, 168, 75, 0.15) transparent !important;
}

*::-webkit-scrollbar {
    width: 6px !important;
    height: 6px !important;
}

*::-webkit-scrollbar-thumb {
    background: rgba(232, 168, 75, 0.14) !important;
    border-radius: 10px !important;
}

*::-webkit-scrollbar-thumb:hover {
    background: rgba(232, 168, 75, 0.3) !important;
}

*::-webkit-scrollbar-track {
    background: transparent !important;
}


/* ===================================================================
   15. MUSIC / NOW PLAYING BAR
   =================================================================== */

/* App footer */
.appfooter {
    background: #0c0f14 !important;
    border-top: 1px solid rgba(232, 168, 75, 0.05) !important;
    border-radius: 16px 16px 0 0 !important;
}

/* Volume OSD */
.volumeOsd {
    background: rgba(19, 23, 31, 0.92) !important;
    border: 1px solid rgba(232, 168, 75, 0.06) !important;
}


/* ===================================================================
   16. BACKDROP & LIBRARY PAGE REFINEMENTS
   =================================================================== */

/* Library page backdrop */
.libraryDocument.withSectionTabs .backgroundContainer {
    backdrop-filter: blur(20px) brightness(0.25) !important;
    background-color: rgba(12, 15, 20, 0.6) !important;
}

/* Mobile backdrop */
.layout-mobile .backdropImage {
    opacity: 0.25 !important;
}

/* Backdrop sidebar blending */
.layout-desktop:has(.backgroundContainer.withBackdrop) .navMenuOption-selected,
.layout-mobile:has(.backgroundContainer.withBackdrop) .navMenuOption-selected {
    background: rgba(12, 15, 20, 0.55) !important;
    backdrop-filter: blur(var(--blur)) !important;
}


/* ===================================================================
   17. TV GUIDE IMPROVEMENTS
   =================================================================== */

/* Guide date tabs — match dark header */
.emby-tabs-slider.guideDateTabsSlider {
    background: var(--header-background-color) !important;
    color: var(--header-text-color) !important;
}

/* Active guide date tab — amber */
button.emby-tab-button.guide-date-tab-button.emby-tab-button-active.emby-button {
    background: var(--primary-accent-color) !important;
    color: var(--text-color) !important;
    box-shadow: 0 2px 14px rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.3) !important;
}


/* ===================================================================
   18. MISC REFINEMENTS
   =================================================================== */

/* Alpha picker */
.alphaPickerButton {
    color: #5a564f !important;
}
.alphaPickerButton:hover {
    color: #d1cdc6 !important;
}
.alphaPickerButton-selected {
    color: var(--primary-accent-color) !important;
}

/* Username on profile page */
.username {
    color: var(--primary-accent-color) !important;
}

/* Remove harsh borders */
.listItem-border {
    border: 0 !important;
}

/* Submit button — amber */
.button-submit {
    background: var(--primary-accent-color) !important;
    color: var(--text-color) !important;
}

/* Cancel buttons — muted red */
#btnCancel,
#btnResetPassword,
.button-cancel {
    background: rgba(180, 85, 85, 0.7) !important;
}

/* Checkboxes — amber */
.emby-checkbox:checked + span + .checkboxOutline {
    background: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
}

/* Star rating spin */
.starRatingContainer:hover .starIcon {
    animation: spin 1.5s ease-in-out !important;
}

/* Separator icons — warm */
.separator-icon {
    color: rgba(var(--primary-r), var(--primary-g), var(--primary-b), 0.5) !important;
}

/* Login page background */
.layout-desktop .backgroundContainer:not(.withBackdrop):not(.backgroundContainer-transparent) {
    background-color: #0c0f14 !important;
}


/* ===================================================================
   END OF THEME
   
   Color Palette Summary — "Midnight Ember":
   ┌──────────────────────────────────────┐
   │  Accent:     #E8A84B  (Warm Gold)   │
   │  Primary BG: #0C0F14  (Deep Dark)   │
   │  Surface:    #13171F  (Dark Navy)   │
   │  Elevated:   #1A1F2A  (Navy Gray)   │
   │  Input BG:   #171C26  (Muted Dark)  │
   │  Body Text:  #D1CDC6  (Warm Gray)   │
   │  Bright Text:#F0ECE5  (Warm White)  │
   │  Muted Text: #8A857C  (Dim Warm)    │
   │  Header BG:  rgba(12,15,20,0.82)    │
   └──────────────────────────────────────┘
   =================================================================== */
